<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VNâ€‘MW â€” Symbolic Weather</title>
  <style>
    html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;background:#0b1220;color:#e6edf3}
    .wrap{max-width:760px;margin:48px auto;padding:0 16px}
    .card{background:#0f172a;border:1px solid #1f2937;border-radius:16px;padding:20px;box-shadow:0 8px 30px rgba(0,0,0,.25)}
    h1{font-size:28px;margin:0 0 12px}
    p{opacity:.85;line-height:1.55}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px}
    .pill{font-size:14px;padding:8px 12px;border-radius:999px;background:#111827;display:inline-block;margin-right:8px;border:1px solid #1f2937}
    .big{font-size:64px;line-height:1}
    .muted{opacity:.7}
    code{background:#0b1220;border:1px solid #1f2937;border-radius:8px;padding:2px 6px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>VNâ€‘MW â€” Symbolic Weather</h1>
      <p class="muted">Verseâ€‘Nerves Middleware Â· RMRIÎ” clarity index</p>
      <div class="grid">
        <div>
          <div id="emoji" class="big">ðŸŒ™</div>
          <div id="weather" class="pill">rest</div>
          <div id="phase" class="pill">phase: â€”</div>
        </div>
        <div>
          <p>I = (EÂ·s)/cÂ²</p>
          <p>Current: <code id="I">â€”</code></p>
          <p>E: <code id="E">â€”</code> &nbsp; s: <code id="s">â€”</code> &nbsp; cÂ²: <code id="c2">â€”</code></p>
        </div>
      </div>
      <p class="muted">POST metrics to <code>/vn/observe</code> to update.</p>
    </div>
  </div>
<script>
async function tick(){
  try{
    const r = await fetch('/vn/status');
    const j = await r.json();
    const rm = j.rmri || {};
    document.getElementById('I').textContent = (rm.I!==undefined? rm.I.toFixed(4) : 'â€”');
    document.getElementById('E').textContent = (rm.E!==undefined? rm.E.toFixed(2) : 'â€”');
    document.getElementById('s').textContent = (rm.s!==undefined? rm.s.toFixed(2) : 'â€”');
    document.getElementById('c2').textContent = (rm.c2!==undefined? rm.c2.toFixed(2) : 'â€”');
    const w = j.weather || 'ðŸŒ™ rest';
    const [emoji, label] = w.split(' ');
    document.getElementById('emoji').textContent = emoji;
    document.getElementById('weather').textContent = label || w;
    document.getElementById('phase').textContent = 'phase: ' + (j.phase || 'â€”');
  }catch(e){/* noop */}
  setTimeout(tick, 1000);
}
tick();
</script>
</body>
</html>
